<template>
    <lightning-modal-header label="Search Product"></lightning-modal-header>

    <!-- Body -->
    <lightning-modal-body>
        <template if:true={isSpinner}>
            <lightning-spinner alternative-text="Loading" size="large"></lightning-spinner>
        </template>
        <div class="slds-grid slds-gutters searchDiv">
            <div class="slds-col slds-size_1-of-6">
               
            </div>
            <div class="slds-col slds-size_1-of-6">
             
            </div>
            <div class="slds-col slds-size_1-of-6">
              
            </div>
            <div class="slds-col slds-size_2-of-6">
               <lightning-input variant="label-hidden" placeholder="상품코드,상품이름 입력" onchange={handleChangeKeyWord}></lightning-input>
            </div>
            <div class="slds-col slds-size_1-of-6">
                <div class="slds-float_right">
                    <lightning-button label="Search" onclick={handleClickSearch}></lightning-button>
                </div>
            </div>
        </div>
    
        <div class="slds-box slds-theme_default slds-p-around_medium">
            <!-- <lightning-datatable key-field="id"
                                data={data}
                                columns={columns}
                                onrowselection={handleSelectedRow}
                                max-row-selection={maxSelect}
                                min-column-width="150"
                                class="slds-max-medium-table_stacked record_table"
                            >
            </lightning-datatable> -->
            <div class="customTableDiv">
                <table class="slds-max-medium-table_stacked slds-table slds-table_bordered customTable">

                    <!-- thead -->
                    <thead class="slds-text-heading_small">
                        <tr class="slds-line-height_reset">
                            <th class="slds-text-align_center custom_table_head_checkbox" scope="col">
                                <div class="slds-truncate" title="Check Box"> 
                                    <lightning-input type="checkbox" variant="label-hidden" name="selectAll" checked={isAllChecked} disabled={isDisabled} onclick={handleSelectAll}></lightning-input>
                                </div>
                            </th>
                            <th class="slds-text-align_center custom_table_head" scope="col">
                                <div class="slds-truncate" title="Product Code">Product Code</div>
                            </th>
                            <th class="slds-text-align_center custom_table_head" scope="col">
                                <div class="slds-truncate" title="Product Name">Product Name</div>
                            </th>
                            <th class="slds-text-align_center custom_table_head" scope="col">
                                <div class="slds-truncate" title="English">Product EngName</div>
                            </th>
                            <th class="slds-text-align_center custom_table_head" scope="col">
                                <div class="slds-truncate" title="Price">Price</div>
                            </th>
                            <th class="slds-text-align_center custom_table_head" scope="col">
                                <div class="slds-truncate" title="Unit">Unit</div>
                            </th>
                            <th class="slds-text-align_center custom_table_head" scope="col">
                                <div class="slds-truncate" title="Tax Type">Tax Type</div>
                            </th>
                        </tr>
                    </thead>

                    <!-- tbody -->
                    <tbody>
                        <template lwc:if={isDataList} for:each={dataList} for:item="item" for:index="index">
                            <tr class="slds-hint-parent customTableTr" key={item.id}>
                                <td data-label="Product Code" class="slds-text-align_center">
                                    <lightning-input name="isChecked" data-index={index} type="checkbox" checked={item.isChecked} variant="label-hidden" onclick={handleSelectedRow}></lightning-input>
                                </td>
                                <td data-label="Product Code" class="slds-text-align_center">
                                    {item.productCode}
                                </td>
                                <td data-label="Product Code" class="slds-text-align_center">
                                    <a href={item.productUrl} target="_blank">{item.productName}</a>
                                </td>
                                <td data-label="Eng Name" class="slds-text-align_center">
                                    {item.productNameEng}
                                </td>
                                <td data-label="Price" class="slds-text-align_center">
                                    {item.productPrice}
                                </td>
                                <td data-label="Unit" class="slds-text-align_center">
                                    {item.unit}
                                </td>
                                <td data-label="Tax Type" class="slds-text-align_center">
                                    {item.taxType}
                                </td>
                            </tr>
                        </template>

                        <!-- No Data -->
                        <template lwc:else>
                            <tr class="customTableNoData">
                                <td data-label="Product Code" class="slds-text-align_center" colspan='7'>
                                    No Data
                                </td>
                            </tr>
                        </template>

                    </tbody>
                </table>
            </div>
        </div>
    </lightning-modal-body>

    <!-- footer -->
    <lightning-modal-footer>
        <lightning-button label="Cancel" class="slds-button" onclick={handleCancel}></lightning-button>
        <lightning-button label="OK" class="slds-button" variant="brand" onclick={handleSave}></lightning-button>
    </lightning-modal-footer>
</template>